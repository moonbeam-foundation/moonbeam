# PR #7229: Deprecate RuntimeEvent Associated Type from Config Trait

## Summary
This PR deprecates the explicit `RuntimeEvent` associated type in FRAME pallet `Config` traits. The change uses associated type bounds to automatically handle event type conversion, eliminating the need for boilerplate code in pallet configurations.

## PR Details
- **Title:** FRAME: Deprecate `RuntimeEvent` associated type from `Config` trait
- **URL:** https://github.com/paritytech/polkadot-sdk/pull/7229
- **Labels:** T1-FRAME
- **Audience:** Runtime Dev

## What Changed

### Before
```rust
#[pallet::config]
pub trait Config: frame_system::Config {
    /// Overarching event type.
    type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
}
```

### After
```rust
#[pallet::config]
pub trait Config: frame_system::Config {
    // RuntimeEvent can now be omitted entirely
}
```

### For Existing Code (Transition Period)
```rust
#[pallet::config]
pub trait Config: frame_system::Config {
    /// Overarching event type.
    #[allow(deprecated)]
    type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
}
```

## Technical Details

The FRAME procedural macros now automatically append the required type bounds to `frame_system::Config` using associated type bound syntax:

```rust
pub trait Config: frame_system::Config + frame_system::Config<RuntimeEvent: From<Event<Self>>> {
}
```

This makes explicit `RuntimeEvent` declarations redundant. The PR adds `#[allow(deprecated)]` attributes across the polkadot-sdk codebase to suppress compiler warnings during the transition period.

## Impact on Moonbeam

### Severity: MODERATE

This is a **deprecation**, not a breaking change. Existing code will continue to work but will emit deprecation warnings unless updated with the `#[allow(deprecated)]` attribute.

### Affected Components

#### Custom Pallets (7 locations)
All custom Moonbeam pallets that define events are affected:

1. **parachain-staking** (`/Users/manuelmauro/Workspace/moonbeam/pallets/parachain-staking/src/lib.rs:118`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

2. **xcm-transactor** (`/Users/manuelmauro/Workspace/moonbeam/pallets/xcm-transactor/src/lib.rs:121`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

3. **ethereum-xcm** (`/Users/manuelmauro/Workspace/moonbeam/pallets/ethereum-xcm/src/lib.rs:125`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

4. **crowdloan-rewards** (`/Users/manuelmauro/Workspace/moonbeam/pallets/crowdloan-rewards/src/lib.rs:75`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

5. **xcm-weight-trader** (`/Users/manuelmauro/Workspace/moonbeam/pallets/xcm-weight-trader/src/lib.rs:94`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

6. **moonbeam-orbiters** (`/Users/manuelmauro/Workspace/moonbeam/pallets/moonbeam-orbiters/src/lib.rs:70`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

7. **moonbeam-foreign-assets** (`/Users/manuelmauro/Workspace/moonbeam/pallets/moonbeam-foreign-assets/src/lib.rs:219`)
   ```rust
   type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
   ```

#### Test Mock Configurations (12 locations)
XCM mock pallets in runtime tests also use this pattern:

- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/statemine_like.rs` (2 instances)
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/parachain.rs` (2 instances)
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/parachain.rs` (2 instances)
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/statemint_like.rs` (2 instances)
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/parachain.rs` (2 instances)
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/statemint_like.rs` (2 instances)

#### Unaffected Pallets
The following Moonbeam pallets do NOT define events and are unaffected:
- `erc20-xcm-bridge` (no Event type)
- `moonbeam-lazy-migrations` (no Event type)
- `proxy-genesis-companion` (no Event type)
- `precompile-benchmarks` (no Event type)

## Required Changes

### Option 1: Add Deprecation Allowance (Recommended for Immediate Compatibility)
Add `#[allow(deprecated)]` attribute above each `RuntimeEvent` type declaration to suppress warnings:

```rust
#[pallet::config]
pub trait Config: frame_system::Config {
    /// Overarching event type.
    #[allow(deprecated)]
    type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
    // ... rest of config
}
```

This approach:
- Maintains compatibility with stable2506
- Requires minimal changes (1 line per pallet)
- Allows future removal when ready
- Aligns with polkadot-sdk transition strategy

### Option 2: Remove RuntimeEvent Declarations (Future Migration)
Once the polkadot-sdk ecosystem fully adopts this pattern, remove `RuntimeEvent` declarations entirely:

```rust
#[pallet::config]
pub trait Config: frame_system::Config {
    // RuntimeEvent removed - automatically handled by macro
    // ... rest of config
}
```

This approach:
- Cleaner, more concise code
- Reduced boilerplate
- Should be done after verifying compatibility with all dependencies

## Breaking Changes
**None.** This is a deprecation only. Existing code continues to work with the `#[allow(deprecated)]` attribute.

## Migration Path

1. **Immediate (For stable2506 compatibility):**
   - Add `#[allow(deprecated)]` to all 19 affected locations
   - Verify builds without warnings
   - No functional changes required

2. **Future (Optional cleanup):**
   - Remove `RuntimeEvent` type declarations from custom pallets
   - Update tests to verify automatic event type handling
   - Benchmark to confirm no performance impact

## Recommendations

1. **Apply `#[allow(deprecated)]` attribute to all affected files** to maintain clean builds
2. **Monitor polkadot-sdk ecosystem adoption** before removing declarations entirely
3. **Test thoroughly** after applying changes, especially:
   - Event emission in all custom pallets
   - XCM mock configurations in integration tests
   - Runtime upgrades with migration tests

## Related Changes
This PR is the first step in a broader effort to remove boilerplate runtime type declarations. Future PRs may deprecate `RuntimeCall` and other similar associated types.

## Crate Changes (from PRDoc)
- `frame-support`: minor bump
- `pallet-examples`: minor bump

## Files Requiring Updates

### Production Pallets
1. `/Users/manuelmauro/Workspace/moonbeam/pallets/parachain-staking/src/lib.rs:118`
2. `/Users/manuelmauro/Workspace/moonbeam/pallets/xcm-transactor/src/lib.rs:121`
3. `/Users/manuelmauro/Workspace/moonbeam/pallets/ethereum-xcm/src/lib.rs:125`
4. `/Users/manuelmauro/Workspace/moonbeam/pallets/crowdloan-rewards/src/lib.rs:75`
5. `/Users/manuelmauro/Workspace/moonbeam/pallets/xcm-weight-trader/src/lib.rs:94`
6. `/Users/manuelmauro/Workspace/moonbeam/pallets/moonbeam-orbiters/src/lib.rs:70`
7. `/Users/manuelmauro/Workspace/moonbeam/pallets/moonbeam-foreign-assets/src/lib.rs:219`

### Test Mocks
8. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/statemine_like.rs:403`
9. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/statemine_like.rs:563`
10. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/parachain.rs:396`
11. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/parachain.rs:552`
12. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/parachain.rs:413`
13. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/parachain.rs:569`
14. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/statemint_like.rs:401`
15. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/statemint_like.rs:561`
16. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/parachain.rs:405`
17. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/parachain.rs:561`
18. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/statemint_like.rs:403`
19. `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/statemint_like.rs:563`

## Verification Steps

After applying changes:

```bash
# 1. Clean build to check for deprecation warnings
cargo clean
cargo build --release 2>&1 | grep -i "deprecated"

# 2. Run pallet tests
cargo test -p pallet-parachain-staking
cargo test -p pallet-xcm-transactor
cargo test -p pallet-ethereum-xcm
cargo test -p pallet-crowdloan-rewards
cargo test -p pallet-xcm-weight-trader
cargo test -p pallet-moonbeam-orbiters
cargo test -p pallet-moonbeam-foreign-assets

# 3. Run runtime tests
cargo test -p moonbase-runtime
cargo test -p moonriver-runtime
cargo test -p moonbeam-runtime

# 4. Verify events still work in integration tests
cd test
pnpm moonwall test dev_moonbase
```

## Additional Notes

- The deprecation is enforced at the macro level, so IDEs and rust-analyzer will show warnings
- The change is backward compatible - no runtime migrations needed
- Future polkadot-sdk versions may make `RuntimeEvent` declarations a hard error, so eventual removal is recommended
- This pattern will likely be extended to other associated types (RuntimeCall, RuntimeOrigin, etc.)
