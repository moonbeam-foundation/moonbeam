# PR #7597: Introduce CreateBare, deprecated CreateInherent

## Overview
**PR Title:** Introduce CreateBare, deprecated CreateInherent
**PR URL:** https://github.com/paritytech/polkadot-sdk/pull/7597
**Labels:** T1-FRAME
**Audience:** Runtime Dev

## Summary
This PR addresses a naming confusion in the Polkadot-SDK by renaming the `CreateInherent` trait to `CreateBare` and deprecating the `create_inherent` method in favor of `create_bare`. The trait was originally misnamed because it was being used to generate unsigned transactions (which use the "Bare" extrinsic type), not just inherents.

## Changes in Polkadot-SDK

### Core Changes
- **Trait Rename:** `frame_system::offchain::CreateInherent` → `frame_system::offchain::CreateBare`
- **Method Rename:** `create_inherent()` → `create_bare()`
- **Implementation Pattern:** Remains the same - typically implemented using `Extrinsic::new_bare(call)`

### Affected Crates
- frame-system (major bump)
- polkadot-runtime-common (major bump)
- polkadot-runtime-parachains (major bump)
- pallet-babe, pallet-beefy, pallet-grandpa, pallet-im-online (major bumps)
- Multiple other runtime pallets

## Impact on Moonbeam

### Affected Files

#### 1. XCM Mock Relay Chain Test Files (3 files)
**Location:**
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/tests/xcm_mock/relay_chain.rs`
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/tests/xcm_mock/relay_chain.rs`
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/tests/xcm_mock/relay_chain.rs`

**Current Implementation (lines 318-325):**
```rust
impl<C> frame_system::offchain::CreateInherent<C> for Runtime
where
	RuntimeCall: From<C>,
{
	fn create_inherent(call: RuntimeCall) -> UncheckedExtrinsic {
		UncheckedExtrinsic::new_bare(call)
	}
}
```

**Required Change:**
```rust
impl<C> frame_system::offchain::CreateBare<C> for Runtime
where
	RuntimeCall: From<C>,
{
	fn create_bare(call: RuntimeCall) -> UncheckedExtrinsic {
		UncheckedExtrinsic::new_bare(call)
	}
}
```

**Impact Analysis:**
- These are **test-only files** used for XCM mocking in runtime tests
- No production runtime code is affected
- The implementation logic remains identical (still uses `UncheckedExtrinsic::new_bare`)
- Simple find-and-replace operation

### Non-Affected Code

The following usages were investigated but are **NOT affected** by this PR:

1. **CreateInherentDataProviders** - Different trait, used throughout the codebase for inherent data creation
   - Found in: `node/service/src/lazy_loading/manual_sealing.rs`, `node/service/src/rpc.rs`, `node/service/src/lib.rs`
   - This trait is about creating inherent data providers, not the CreateInherent/CreateBare trait

2. **Direct UncheckedExtrinsic::new_bare() usage** - Not affected, method name unchanged
   - Found in 20+ locations across runtime code
   - These are direct method calls, not trait implementations

## Migration Requirements

### Required Actions

1. **Update Trait Implementations** (3 files)
   - Replace `impl<C> frame_system::offchain::CreateInherent<C>` with `impl<C> frame_system::offchain::CreateBare<C>`
   - Replace method name `fn create_inherent` with `fn create_bare`
   - Keep implementation logic identical

2. **Testing**
   - Run XCM mock tests: `cargo test -p moonbase-runtime`, `cargo test -p moonbeam-runtime`, `cargo test -p moonriver-runtime`
   - Ensure all xcm_mock tests pass

### Migration Steps

```bash
# 1. Update moonbase runtime XCM mock
# Edit: runtime/moonbase/tests/xcm_mock/relay_chain.rs (lines 318-325)

# 2. Update moonbeam runtime XCM mock
# Edit: runtime/moonbeam/tests/xcm_mock/relay_chain.rs (lines 318-325)

# 3. Update moonriver runtime XCM mock
# Edit: runtime/moonriver/tests/xcm_mock/relay_chain.rs (lines 318-325)

# 4. Run tests
cargo test -p moonbase-runtime --test xcm_mock
cargo test -p moonbeam-runtime --test xcm_mock
cargo test -p moonriver-runtime --test xcm_mock
```

## Risk Assessment

**Risk Level:** LOW

**Reasoning:**
- Only affects test code, not production runtime
- Changes are mechanical (simple rename)
- Implementation logic remains unchanged
- No runtime migration required
- No storage changes
- No on-chain behavior changes

## Compatibility Notes

- **Backward Compatibility:** The old `CreateInherent` trait is deprecated but may still be available in the short term
- **Forward Compatibility:** All new code should use `CreateBare` trait
- **Runtime Upgrade:** No runtime spec version bump required for this change alone
- **Client Compatibility:** No client-side changes needed

## Verification Checklist

- [ ] Updated all 3 XCM mock relay chain files
- [ ] Trait name changed: `CreateInherent` → `CreateBare`
- [ ] Method name changed: `create_inherent` → `create_bare`
- [ ] Implementation logic unchanged (still uses `UncheckedExtrinsic::new_bare`)
- [ ] All XCM mock tests pass
- [ ] No compilation errors or warnings

## Related Code Patterns

**Pattern:** Creating unsigned/bare extrinsics for testing
**Usage:** These implementations are used by the mock relay chain runtime in XCM integration tests to create unsigned transactions that can be executed in the test environment.

**Context:** The `MockUncheckedExtrinsic` type is used in all three mock relay chain implementations:
```rust
type UncheckedExtrinsic = frame_system::mocking::MockUncheckedExtrinsic<Runtime>;
```

## Conclusion

This PR has a minimal, localized impact on Moonbeam. The required changes are straightforward, affecting only test infrastructure. The migration involves simple renaming in 3 test files with no changes to production runtime code or on-chain behavior.

**Estimated Effort:** 15 minutes
**Complexity:** Trivial
**Breaking Changes:** Test code only
