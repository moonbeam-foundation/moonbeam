# PR #7720 Impact Analysis: Clamp Core Fellowship Benchmarks to Runtime MaxRank Configuration

**PR Link:** https://github.com/paritytech/polkadot-sdk/pull/7720
**Labels:** T2-pallets
**Polkadot SDK Release:** stable2506
**Impact Level:** âšª **NO IMPACT**

## Summary

This PR modifies `pallet-core-fellowship` to change the `MaxRank` configuration type from `u32` to `u16` and fix benchmarking issues where ranks could exceed the configured `MaxRank` limit. The change is **NOT APPLICABLE** to Moonbeam as the project does not use `pallet-core-fellowship`.

## PR Overview

### Problem Solved
The PR fixes benchmarking bugs in `pallet-core-fellowship`:
1. **Compile-time vs Runtime Mismatch**: The `promote_fast` benchmark used mock runtime settings that could conflict with actual runtime configuration
2. **Static Rank Assumptions**: Benchmarks like `bump_demote` and `promote` had hardcoded rank values incompatible with `MaxRank=1`

### Solution
- Changed `MaxRank` type from `u32` to `u16`
- Implemented dynamic rank clamping using `min()` operations in benchmarks
- Updated all usages of `ConstU32<N>` to `ConstU16<N>` for MaxRank configurations

### Breaking Changes
Runtime developers using `pallet-core-fellowship` must update their configurations:
```rust
// Before
MaxRank = ConstU32<9>

// After
MaxRank = ConstU16<9>
```

## Files Modified in polkadot-sdk

1. **substrate/frame/core-fellowship/src/lib.rs** - Changed MaxRank type definition
2. **substrate/frame/core-fellowship/src/benchmarking.rs** - Added rank clamping logic
3. **substrate/frame/core-fellowship/src/migration.rs** - Updated migration checks
4. **substrate/frame/core-fellowship/src/tests/** - Updated test configurations
5. **substrate/frame/core-fellowship/src/weights.rs** - Adjusted weight calculations
6. **cumulus/parachains/runtimes/collectives/collectives-westend/** - Updated Westend runtime configs
7. **substrate/bin/node/runtime/src/lib.rs** - Updated kitchensink runtime

## Impact on Moonbeam

### Evidence of No Impact

**Codebase Search Results:**
```bash
# Search for pallet-core-fellowship references
$ grep -r "pallet-core-fellowship\|pallet_core_fellowship\|CoreFellowship" .
# Result: No matches found

# Search for MaxRank configuration
$ grep -r "MaxRank" .
# Result: No matches found

# Search in Cargo.toml dependencies
$ grep "pallet-core-fellowship" runtime/*/Cargo.toml Cargo.toml
# Result: No matches found
```

**Moonbeam Pallets Used (from CLAUDE.md):**
- System, Balances, ParachainSystem, ParachainStaking
- EVM, Ethereum, EthereumChainId, EthereumXcm
- XcmpQueue, PolkadotXcm, CumulusXcm, XcmTransactor
- Erc20XcmBridge, Treasury, ConvictionVoting, Referenda
- Identity, Proxy, Multisig, AuthorInherent, AuthorFilter
- AuthorMapping, MessageQueue, EmergencyParaXcm
- EvmForeignAssets, XcmWeightTrader, MultiBlockMigrations, WeightReclaim

**Notable:** `pallet-core-fellowship` is NOT in this list.

### Reasoning

1. **Pallet Not Used**: Moonbeam does not include `pallet-core-fellowship` in any of its three runtimes (moonbeam, moonriver, moonbase)

2. **No Dependencies**: The pallet is not listed as a dependency in any Cargo.toml files across the entire Moonbeam codebase

3. **Different Use Case**: The Core Fellowship pallet is designed for managing technical fellowships (like Polkadot's Technical Fellowship). Moonbeam, as an Ethereum-compatible parachain, has a different governance model focused on its ConvictionVoting and Referenda pallets

4. **No Indirect Impact**: The changes are confined to the pallet itself and don't affect any shared substrate primitives or traits that Moonbeam might use

## Action Required

**None** - No changes needed in Moonbeam codebase.

## Verification Commands

To verify this analysis:

```bash
# From Moonbeam repository root
cd /Users/manuelmauro/Workspace/moonbeam

# Search for any core-fellowship references
rg "core.fellowship" -i

# Search for MaxRank (the changed type)
rg "MaxRank"

# Check runtime dependencies
cat runtime/moonbeam/Cargo.toml | grep "pallet-core-fellowship"
cat runtime/moonriver/Cargo.toml | grep "pallet-core-fellowship"
cat runtime/moonbase/Cargo.toml | grep "pallet-core-fellowship"
```

All commands should return no matches or results.

## Conclusion

PR #7720 has **zero impact** on Moonbeam. The changes are entirely contained within `pallet-core-fellowship`, which is not used by Moonbeam's parachain architecture. No code changes, testing, or migration work is required for this PR.
