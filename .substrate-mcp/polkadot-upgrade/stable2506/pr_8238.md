# PR #8238 Analysis: Add `checked_sqrt` to the `FixedPointNumber` trait

## Metadata
- **PR**: https://github.com/paritytech/polkadot-sdk/pull/8238
- **Labels**: T13-deprecation, R1-breaking_change, T17-primitives
- **Crates**: sp-arithmetic (major bump)
- **Audience**: Runtime Dev

## Summary

This PR adds a `checked_sqrt` function to the `FixedPointNumber` trait and deprecates the existing `const fn try_sqrt` function in favor of a `const fn checked_sqrt`. The change affects the following fixed-point number types:
- `FixedI64`
- `FixedU64`
- `FixedI128`
- `FixedU128`

## Breaking Changes

The breaking change is **specific to const context usage**:
- Projects using the **const** function `try_sqrt` from fixed-point types must migrate to `checked_sqrt`
- The non-const trait method is not affected
- Both const and non-const versions of `checked_sqrt` are maintained

### Migration Path
Replace all instances of `const fn try_sqrt()` with `const fn checked_sqrt()`.

## Impact on Moonbeam: **OPTIONAL**

### Analysis

The Moonbeam codebase was thoroughly analyzed for usage of the affected functionality:

1. **`try_sqrt` usage**: ✅ NOT FOUND
   - No occurrences of the deprecated `try_sqrt` function found in the codebase

2. **`sqrt` operations**: ✅ NOT FOUND
   - No sqrt operations on fixed-point numbers found

3. **`checked_sqrt` usage**: ✅ NOT FOUND
   - No existing usage (as this is a new function)

4. **Fixed-point number types usage**: ✅ FOUND (non-breaking context)
   - `FixedPointNumber` trait imported in runtime files:
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/lib.rs`
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/src/lib.rs`
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs`

   - `FixedI64` used in governance tracks (all runtimes):
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/governance/tracks.rs`
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/src/governance/tracks.rs`
     - `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/governance/tracks.rs`

   **Usage context**: Only `from_rational` const function is used for governance track configuration:
   ```rust
   const fn percent(x: i32) -> sp_runtime::FixedI64 {
       sp_runtime::FixedI64::from_rational(x as u128, 100)
   }
   ```

### Conclusion

**No action required.** The Moonbeam codebase does not use the deprecated `try_sqrt` function or any sqrt operations on fixed-point numbers. The existing usage of `FixedI64` in governance tracks is limited to the `from_rational` constructor, which is unaffected by this PR.

### Impact Classification: OPTIONAL

- **MUST**: No
- **OPTIONAL**: Yes - The PR is a breaking change but doesn't affect Moonbeam's codebase
- **INHERITED**: No
- **DON'T KNOW**: No

## Recommendations

1. No immediate action needed
2. No code changes required
3. Monitor for future deprecation warnings when `try_sqrt` is eventually removed from the SDK
4. Consider using `checked_sqrt` if square root operations on fixed-point numbers are needed in the future

## References

- **PRDoc**: `/Users/manuelmauro/.substrate-mcp/moonbeam/releases/stable2506/pr-docs/pr_8238.prdoc`
- **GitHub PR**: https://github.com/paritytech/polkadot-sdk/pull/8238
- **Related Issue**: #8214
