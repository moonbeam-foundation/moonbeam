# PR #8310: staking-async: add missing new_session_genesis

**Impact**: INHERITED
**Confidence**: High
**Affected Components**: None (indirect dependency only)

## Changes Detected

This PR fixes a genesis initialization bug in the `pallet-staking-async-ah-client` module where the `new_session_genesis` method was missing from two `SessionManager` trait implementations:
1. `pallet_session::SessionManager<T::AccountId>` implementation
2. `historical::SessionManager<T::AccountId, sp_staking::Exposure<T::AccountId, BalanceOf<T>>>` implementation

The fix ensures proper chain initialization for the staking-async module, which has three operating modes: Passive, Buffered, and Active.

**Root Cause**: As noted in the PR, the issue stemmed from trait auto-implementations and how the session manager was configured in some runtimes (issue #8302, introduced by PR #8127).

## Project Impact

**No direct impact on Moonbeam.**

The `pallet-staking-async-ah-client` is not used by any Moonbeam runtime (moonbase, moonbeam, or moonriver). The pallet appears in the dependency tree only as an indirect dependency through `westend-runtime`.

### Dependency Chain
```
moonbeam-relay-encoder
  └── westend-runtime (dev/test dependency)
       └── pallet-staking-async-ah-client
       └── pallet-staking-async-rc-client
```

### Usage Context
Moonbeam uses `westend-runtime` exclusively in test code to verify relay chain call encoding for:
- Staking operations (bond, unbond, validate, nominate, etc.)
- HRMP operations (open channel, accept, close, cancel)
- Utility operations (as_derivative)

Reference: `/Users/manuelmauro/Workspace/moonbeam/runtime/relay-encoder/src/westend.rs` (lines 196-850 contain tests using `westend_runtime::Runtime`)

Since Moonbeam doesn't directly use or configure `pallet-staking-async`, the genesis initialization fix is automatically inherited through the upstream dependency update without requiring any code changes.

## Evidence & References

### Dependency Search Results

1. **No direct usage in Moonbeam runtimes:**
```bash
# Search for staking-async in runtime Cargo.toml files
$ rg 'pallet-staking-async' /Users/manuelmauro/Workspace/moonbeam/runtime --glob '**/*.toml'
# No matches found
```

2. **No configuration in Moonbeam code:**
```bash
# Search for StakingAsync references in runtime code
$ rg 'StakingAsync|staking_async' /Users/manuelmauro/Workspace/moonbeam/runtime --glob '**/*.rs'
# No files found
```

3. **westend-runtime dependency confirmed:**
```toml
# /Users/manuelmauro/Workspace/moonbeam/runtime/relay-encoder/Cargo.toml
[dependencies]
westend-runtime = { workspace = true }

[features]
std = [
    "westend-runtime/std",
]
```

4. **Cargo.lock shows transitive dependency:**
```
westend-runtime
 ├── pallet-staking-async-ah-client (v0.2.0)
 └── pallet-staking-async-rc-client (v0.2.0)
```

### Test Usage Pattern

The `westend_runtime` is used in tests to validate that Moonbeam's call encoders produce byte-identical results to the actual Westend runtime pallets. Example from `/Users/manuelmauro/Workspace/moonbeam/runtime/relay-encoder/src/westend.rs:207-217`:

```rust
let index = <westend_runtime::Runtime as frame_system::Config>::PalletInfo::index::<
    westend_runtime::Utility,
>()
.unwrap() as u8;
```

## Conclusion

This PR represents an **INHERITED** change that fixes a bug in an upstream dependency. No action is required from the Moonbeam team as:
1. The pallet is not directly used in Moonbeam runtimes
2. The fix is automatically included via dependency update
3. The change only affects genesis initialization of staking-async, which Moonbeam doesn't configure
4. The test dependency on `westend-runtime` continues to work without modification
