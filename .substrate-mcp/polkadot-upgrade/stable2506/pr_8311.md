# PR #8311: [pallet-revive] update tracing rpc methods parameters

**Impact**: INHERITED
**Confidence**: High
**Affected Components**: None (pallet-revive not used by Moonbeam)

## Changes Detected

PR #8311 updates the `debug_trace*` RPC methods in `pallet-revive` to support additional parameters compatible with Geth:
- Adds a `timeout` parameter to limit trace execution time
- Adds an option to return only the top-level call trace (not nested subcalls)

The PR is marked as a major version bump for:
- `pallet-revive` (major)
- `pallet-revive-eth-rpc` (major)

## Project Impact

**No impact on Moonbeam**

This PR exclusively affects `pallet-revive`, which Moonbeam does not use. Key architectural differences:

| Component | pallet-revive | Moonbeam |
|-----------|---------------|----------|
| Smart Contract VM | PolkaVM (RISC-V based) | EVM (Ethereum) |
| Runtime Pallet | `pallet-revive` | `pallet-evm` (Frontier) |
| RPC Implementation | `pallet-revive-eth-rpc` | Moonbeam's custom debug RPC |
| Tracing System | pallet-revive's tracing | `moonbeam-client-evm-tracing` |

**Moonbeam's Own Implementation:**

Moonbeam already has its own EVM tracing infrastructure with similar (but independently implemented) features:

1. **Timeout Support**: Already present in Moonbeam
   - File: `/Users/manuelmauro/Workspace/moonbeam/client/rpc-core/debug/src/lib.rs:34`
   - `pub timeout: Option<String>` in `TraceParams` struct

2. **Tracer Configuration**: Already present in Moonbeam
   - File: `/Users/manuelmauro/Workspace/moonbeam/client/evm-tracing/src/types/single.rs:106-108`
   - `TraceCallConfig` struct with `with_log` field
   - Test evidence shows `onlyTopCall` support: `/Users/manuelmauro/Workspace/moonbeam/test/suites/smoke/test-old-regressions.ts:250`

3. **RPC Methods**: Moonbeam implements its own debug RPC
   - `debug_traceTransaction`
   - `debug_traceCall`
   - `debug_traceBlockByNumber` / `debug_traceBlockByHash`
   - Implementation: `/Users/manuelmauro/Workspace/moonbeam/client/rpc/debug/src/lib.rs`

## Evidence & References

**pallet-revive NOT in Moonbeam dependencies:**
```bash
# Search in all Cargo.toml files
$ grep -r "pallet-revive" /Users/manuelmauro/Workspace/moonbeam/**/*.toml
# Result: No matches (only transitive dependency in Cargo.lock)
```

**Moonbeam uses pallet-evm from Frontier:**
```toml
# /Users/manuelmauro/Workspace/moonbeam/Cargo.toml:248-250
pallet-evm = {
    git = "https://github.com/moonbeam-foundation/frontier",
    branch = "moonbeam-polkadot-stable2506",
    default-features = false,
    features = ["forbid-evm-reentrancy"]
}
```

**Moonbeam's TraceParams already includes timeout:**
```rust
// /Users/manuelmauro/Workspace/moonbeam/client/rpc-core/debug/src/lib.rs:25-35
#[derive(Clone, Eq, PartialEq, Debug, Deserialize)]
#[serde(rename_all = "camelCase")]
pub struct TraceParams {
    pub disable_storage: Option<bool>,
    pub disable_memory: Option<bool>,
    pub disable_stack: Option<bool>,
    pub tracer: Option<String>,
    pub tracer_config: Option<single::TraceCallConfig>,
    pub timeout: Option<String>,  // ← Already present
}
```

**Test shows onlyTopCall support:**
```typescript
// /Users/manuelmauro/Workspace/moonbeam/test/suites/smoke/test-old-regressions.ts:247-253
| {
    timeout?: string;
    tracerConfig?: {
      onlyTopCall?: boolean;  // ← Already supported
      withLog?: boolean;
    };
  }
```

## Conclusion

This PR has **no impact** on Moonbeam because:

1. **Different execution environments**: pallet-revive (PolkaVM) vs pallet-evm (EVM)
2. **Separate RPC implementations**: pallet-revive-eth-rpc vs Moonbeam's custom RPC layer
3. **No dependency**: pallet-revive is not used by Moonbeam (only appears as transitive dependency in Cargo.lock)
4. **Features already exist**: Moonbeam has independently implemented similar tracing features in its own EVM tracing infrastructure

The changes will be inherited automatically through the Polkadot SDK update but will not affect Moonbeam's functionality or require any code changes.
