# PR #8422: [AHM] Staking async fixes for XCM and election planning

**Impact**: INHERITED
**Confidence**: High
**Affected Components**: None

## Changes Detected

This PR brings several fixes and improvements related to the staking-async feature introduced in the Asset Hub Migration (AHM):

1. **XCM Message Size Validation**: Added the ability for `xcm::validate` to check message size, with implementations in staking-async-rc/parachain-runtime
2. **Election Planning**: Introduced a default `EraElectionPlannerOf` to ensure elections happen in time with educated guesses based on `ElectionProvider::duration`
3. **Type Rename**: Renamed `type SessionDuration` to `type RelaySessionDuration` in `staking-async` for better clarity
4. **Logging Improvements**: Silenced unnecessary INFO logs and made type printing more CLI-friendly
5. **Additional Unit Tests**: Added tests for the election planning functionality

### Affected Polkadot SDK Components

- `pallet-staking-async` (major bump)
- `pallet-staking-async-rc-runtime` (major bump)
- `pallet-staking-async-parachain-runtime` (minor bump)
- `pallet-staking-async-ah-client` (patch bump)
- `pallet-staking-async-rc-client` (minor bump)
- `pallet-election-provider-multi-block` (major bump)

## Project Impact

**No impact on Moonbeam**. This PR specifically targets the Asset Hub Migration (AHM) staking-async feature, which is not used by Moonbeam.

### Analysis

Moonbeam does not use any of the affected components:

1. **No Staking-Async Dependencies**: Grep searches confirm Moonbeam does not import or use any `pallet-staking-async` variants
2. **No Election Provider Multi-Block**: Moonbeam does not use `pallet-election-provider-multi-block`
3. **Custom Staking**: Moonbeam uses its own custom `pallet-parachain-staking` instead of the relay chain staking mechanisms
4. **No Related Type Usage**: No references to `SessionDuration`, `RelaySessionDuration`, or `EraElectionPlanner` types in the codebase

The staking-async feature is specifically designed for parachains that need to participate in relay chain staking, which is not part of Moonbeam's architecture.

## Evidence & References

### Dependency Analysis

**Cargo.lock check for affected pallets:**
- `pallet-staking-async`: Not found
- `pallet-election-provider-multi-block`: Not found

**Codebase searches:**
- `staking-async`: Only found in analysis documentation files (pr_8316.md, pr_8310.md) and Cargo.lock (indirect dependency)
- `SessionDuration`: No matches
- `RelaySessionDuration`: No matches
- `EraElectionPlanner`: No matches

### Runtime Configuration

Moonbeam's runtime (`/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs`) uses:
- `ParachainStaking: pallet_parachain_staking` (line 138) - Moonbeam's custom staking pallet
- Standard XCM pallets (`PolkadotXcm`, `XcmpQueue`, `CumulusXcm`)
- No staking-async or election-provider-multi-block pallets

### Conclusion

The changes in PR #8422 are entirely self-contained within the staking-async ecosystem and will be inherited automatically through the Polkadot SDK version bump without requiring any code changes in Moonbeam. The functionality being improved is not used by Moonbeam's runtime architecture.
