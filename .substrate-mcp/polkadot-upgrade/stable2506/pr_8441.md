# PR #8441: Fix prdoc for frame-metadata 22 update

## Summary

**PR Title:** Add all touched crates in #8327 to prdoc to fix release issue
**Status:** Merged (May 6, 2025)
**Author:** jsdw
**Audience:** Node Operator
**Related PR:** #8327 (Update to frame-metadata 22)

## Description

This is a documentation fix for PR #8327. The original PR updated Polkadot SDK to frame-metadata version 22 but the prdoc file didn't list all the crates that were modified, which caused a release issue. This PR corrects that by adding the complete list of affected crates to the prdoc.

## Context: PR #8327 - Update to frame-metadata 22

The parent PR (#8327) introduced frame-metadata v22, which made an important change to how deprecation works in runtime metadata:

**Key Change:** Removed support for deprecating entire Call/Error/Event enums. Only variant-level deprecation is now supported.

**Before:** Could add `#[deprecated]` to either:
- The entire enum (e.g., `#[deprecated] pub enum Call { ... }`)
- Individual variants (e.g., `SomeVariant #[deprecated]`)

**After:** Can only deprecate individual variants.

**Rationale:**
1. Full enum deprecation is unlikely in practice
2. Calls lack an obvious UI location for enum-wide warnings
3. Variant-only deprecation simplifies client code generation
4. Eliminates confusing states where both enum and variant have deprecation attributes

## Impact on Moonbeam

### Analysis Results

**No Breaking Changes Required** - Moonbeam's codebase only uses:
1. Variant-level deprecation (still supported)
2. Non-enum item deprecation (unaffected)

**Deprecation Usage in Moonbeam:**

1. `/Users/manuelmauro/Workspace/moonbeam/core-primitives/src/lib.rs`
   - Line 56: `#[deprecated]` on a constant `TIMESTAMP_NOW`
   - Status: Not affected (not an enum)

2. `/Users/manuelmauro/Workspace/moonbeam/pallets/parachain-staking/src/types.rs`
   - Line 1115: `#[deprecated(note = "must only be used for backwards compatibility reasons")]` on enum variant `Leaving`
   - Status: Not affected (variant-level deprecation is still supported)

### Compatibility Assessment

- **Runtime Compatibility:** No issues expected
- **Client Compatibility:** frame-metadata 22 is transparent to clients
- **Metadata Generation:** No changes needed
- **API Surface:** No deprecation pattern changes required

## Technical Details

### What This PR Changes
- Updates prdoc documentation only
- No code changes
- Ensures release tooling can properly track affected crates

### Crates Affected by #8327
The prdoc update adds references to all crates modified during the frame-metadata 22 upgrade. This is primarily a release engineering fix.

## Action Items for Moonbeam

### Required Actions
None - This is purely a documentation fix for release tooling.

### Optional Review Points
1. **Metadata compatibility:** When upgrading to stable2506, verify that metadata generation still works correctly with frame-metadata v22
2. **Client tools:** Test that any custom tooling that parses runtime metadata handles the new format
3. **Deprecation patterns:** Continue using variant-level deprecation only (current practice)

### Testing Recommendations
- Standard runtime upgrade testing should be sufficient
- No specific tests needed for this PR
- Metadata format changes are backward compatible

## Labels & Classification

**PR #8441 Labels:**
- R0-no-crate-publish-required (no new versions needed)

**Moonbeam Classification:**
- **Impact Level:** B0-silent (documentation fix only)
- **Breaking:** No
- **Migration Required:** No

## References

- **PR #8441:** https://github.com/paritytech/polkadot-sdk/pull/8441
- **PR #8327:** https://github.com/paritytech/polkadot-sdk/pull/8327
- **PRDoc:** /Users/manuelmauro/.substrate-mcp/moonbeam/releases/stable2506/pr-docs/pr_8441.prdoc

## Conclusion

This PR is a low-risk documentation fix that ensures release tooling properly tracks all crates affected by the frame-metadata 22 update. The underlying changes in PR #8327 are compatible with Moonbeam's current deprecation usage patterns, requiring no code changes during the stable2506 upgrade.
