# PR #8444: Update reference docs to properly specify V4 and V5 transactions

**Impact**: INHERITED
**Confidence**: High
**Affected Components**: None (Documentation Only)

## Changes Detected

Issue #8444 is **NOT a Pull Request** - it is an open GitHub issue requesting documentation improvements for transaction encoding reference docs. Specifically:

1. The reference documentation was updated when V5 transactions were added
2. Information about V4 transaction encoding was lost during the update
3. Some errors were introduced in the documentation
4. A clarification is needed: which version of transaction extensions should be used for V4 transactions
5. The answer: version 0 should always be used for transaction extensions

**Status**: This is an open issue (#8444), not merged code
**Issue opened**: 2025-05-06
**Current state**: OPEN (no associated PR merged)

## Project Impact

**No code changes required** - This is purely a documentation issue in the Polkadot SDK reference docs.

### Analysis

Moonbeam uses TransactionExtension (TxExtension) in all three runtimes as seen in:
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs:1489-1503`
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/lib.rs`
- `/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/src/lib.rs`

The transaction extensions are defined as:
```rust
pub type TxExtension = cumulus_pallet_weight_reclaim::StorageWeightReclaim<
    Runtime,
    (
        frame_system::CheckNonZeroSender<Runtime>,
        frame_system::CheckSpecVersion<Runtime>,
        frame_system::CheckTxVersion<Runtime>,
        frame_system::CheckGenesis<Runtime>,
        frame_system::CheckEra<Runtime>,
        frame_system::CheckNonce<Runtime>,
        frame_system::CheckWeight<Runtime>,
        pallet_transaction_payment::ChargeTransactionPayment<Runtime>,
        frame_metadata_hash_extension::CheckMetadataHash<Runtime>,
    ),
>;
```

However:
1. Issue #8444 is about **documentation** in the Polkadot SDK reference docs, not code changes
2. It addresses confusion about how to encode V4 vs V5 transactions in external tooling/documentation
3. The issue confirms that "version 0 should always be used" for transaction extensions when encoding V4 transactions
4. This is informational guidance for developers building transaction encoding logic

### Moonbeam's Transaction Handling

Moonbeam already correctly uses TransactionExtension throughout the codebase (migrated in stable2506). The runtime:
- Uses modern TxExtension type (not the deprecated SignedExtension)
- Properly implements transaction validation in `validate_transaction` API
- Handles both Ethereum transactions (via pallet_ethereum) and Substrate transactions
- The code at line 1630 even has a comment acknowledging the extension structure

Since this is a documentation issue and not a code change, there are no breaking changes to inherit or implement.

## Evidence & References

### Issue Details
- **GitHub Issue**: #8444 (NOT a PR)
- **Title**: "Update reference docs to properly specify V4 and V5 transactions"
- **Status**: OPEN (as of 2025-10-10)
- **Relates to**: https://paritytech.github.io/polkadot-sdk/master/polkadot_sdk_docs/reference_docs/extrinsic_encoding/index.html

### Moonbeam Codebase Evidence

**TransactionExtension usage found in:**
```
/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/lib.rs
/Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/src/lib.rs
/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs
```

**Auto-generated TypeScript API files (inherited from metadata):**
```
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonriver/interfaces/lookup.ts
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonriver/interfaces/augment-api-tx.ts
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbeam/interfaces/lookup.ts
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbeam/interfaces/augment-api-tx.ts
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbase/interfaces/lookup.ts
/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbase/interfaces/augment-types.ts
```

## Recommendation

**No action required.**

This issue is:
1. Not part of stable2506 (it's an open issue, not merged code)
2. Documentation-only (no runtime or client changes)
3. Already addressed in Moonbeam's implementation (correct use of TransactionExtension)

If the documentation is eventually updated based on this issue, it will only help external developers better understand transaction encoding, but won't require any changes to Moonbeam's codebase.
