# PR #8523: Kiz oty donal ahm builds

**Impact**: INHERITED
**Confidence**: High
**Affected Components**: None (Moonbeam does not use affected pallets)

## Changes Detected

PR #8523 contains bug fixes in the staking-async pallet, specifically:

1. **File**: `cumulus/parachains/runtimes/assets/asset-hub-westend/src/staking.rs`
   - Changed `MaxBackersPerWinnerFinal` from using `VoterSnapshotPerBlock::get()` to `MaxElectingVoters::get()`
   - This ensures the final maximum backers per winner uses the correct value

2. **File**: `substrate/frame/staking-async/src/pallet/mod.rs`
   - Fixed calculation in `ErasClaimedRewardsBound` to multiply `MaxBackersPerWinner` by `Pages`
   - Changed: `MaxBackersPerWinner::get()` to `MaxBackersPerWinner::get() * Pages::get()`
   - This corrects the total nominator count calculation when rewards are paginated

These are internal implementation fixes for the async staking election system used in Asset Hub Westend.

## Project Impact

**No impact on Moonbeam**. This PR only affects:
- `pallet-staking-async` (used by Asset Hub Westend for NPoS staking)
- Asset Hub Westend runtime configuration

Moonbeam does not use these components:

1. **No Direct Usage**: Moonbeam uses `pallet-parachain-staking` (its own custom DPoS staking system), not `pallet-staking-async`
   - Evidence: `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/Cargo.toml` lists `pallet-parachain-staking`, no references to `pallet-staking-async`

2. **No Election Provider**: Moonbeam's parachain-staking does not implement `ElectionProvider` trait or use NPoS elections
   - The changes to `ElectionProvider::MaxBackersPerWinner` and `ElectionProvider::Pages` are not applicable

3. **Relay Chain Encoding Only**: While Moonbeam references `pallet-staking` types in `/Users/manuelmauro/Workspace/moonbeam/runtime/relay-encoder/src/westend.rs`, this is solely for encoding relay chain staking calls (Bond, Nominate, etc.) to be sent via XCM to Westend/Kusama/Polkadot. The bug fixes in async staking do not affect this call encoding logic.

## Evidence & References

### Verification that Moonbeam does not use pallet-staking-async:

```bash
$ rg "staking-async" /Users/manuelmauro/Workspace/moonbeam/runtime --type rust
# No matches found in runtime code

$ rg "pallet-parachain-staking" /Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/Cargo.toml
pallet-parachain-staking = { workspace = true }
pallet-evm-precompile-parachain-staking = { workspace = true }
```

### Runtime Construction:
From `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs`:
```rust
construct_runtime! {
    pub enum Runtime {
        // ... other pallets
        ParachainStaking: pallet_parachain_staking::{Pallet, Call, Storage, Event<T>, Config<T>} = 12,
        // ... other pallets
    }
}
```

### Dependency Analysis:
While `Cargo.lock` shows `pallet-staking-async-ah-client` and `pallet-staking-async-rc-client` as transitive dependencies (through `westend-runtime` and `kusama-runtime`), these are only used for tests and benchmarks involving relay chain runtimes. Moonbeam's own runtimes do not instantiate or configure these pallets.

## Conclusion

This PR fixes bugs in the async staking system's election and rewards calculation. Since Moonbeam uses its own parachain staking system rather than NPoS async staking, these fixes are automatically inherited through the Polkadot SDK upgrade without requiring any code changes in Moonbeam.

The changes will be picked up when Moonbeam updates its Polkadot SDK dependency to stable2506, but no action is required on Moonbeam's side.
