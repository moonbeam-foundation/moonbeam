# PR #8584: Remove all XCM dependencies from `pallet-revive`

**Impact**: INHERITED (No Action Required)
**Confidence**: High
**Affected Components**: None

## Changes Detected

PR #8584 removes all XCM (Cross-Consensus Message) dependencies from `pallet-revive`, including:

- Removed `mock-network` crate used for testing XCM functionality
- Removed unstable `xcm_execute` and `xcm_send` APIs from pallet-revive
- These APIs will be moved to the XCM precompile in `pallet-xcm` to avoid cyclic dependencies

**Modified Crates:**
- `pallet-revive` (major bump)
- `pallet-revive-uapi` (major bump)
- `asset-hub-westend-runtime` (major bump)
- `penpal-runtime` (major bump)

**Rationale:** This is a dependency cleanup PR to eliminate cyclic dependencies between `pallet-revive` and XCM-related crates.

## Project Impact

**No impact on Moonbeam** for the following reasons:

### 1. Different Smart Contract Execution Environments

Moonbeam and pallet-revive use fundamentally different smart contract runtimes:

| Component | pallet-revive | Moonbeam |
|-----------|---------------|----------|
| Smart Contract VM | PolkaVM (RISC-V based) | EVM (Ethereum) |
| Runtime Pallet | `pallet-revive` | `pallet-evm` (Frontier) |
| Precompile System | Revive precompiles | Moonbeam EVM precompiles |
| Target Language | Rust (compiled to PolkaVM) | Solidity/Vyper (compiled to EVM bytecode) |

### 2. No Direct Dependency on pallet-revive

Search results confirm Moonbeam does **not** directly depend on `pallet-revive`:

```bash
# No pallet-revive references in any Cargo.toml files
$ grep -r "pallet-revive" /Users/manuelmauro/Workspace/moonbeam/**/Cargo.toml --exclude-dir=target
# Result: No matches found
```

The only reference to `pallet-revive` in the codebase is:
- **Cargo.lock**: Transitive dependency from Polkadot SDK workspace (not directly used)
- **TypeScript API files**: Auto-generated types from Polkadot SDK metadata that include all available pallets in the dependency tree

### 3. Moonbeam Has Its Own XCM Integration

Moonbeam already has comprehensive XCM functionality through its own infrastructure:

**Existing XCM Components:**
- **Pallet**: `pallet-xcm-transactor` at `/Users/manuelmauro/Workspace/moonbeam/pallets/xcm-transactor/`
- **EVM Precompiles**:
  - XCM Transactor precompile at `/Users/manuelmauro/Workspace/moonbeam/precompiles/xcm-transactor/`
  - XCM Utils precompile at `/Users/manuelmauro/Workspace/moonbeam/precompiles/xcm-utils/`
  - XTokens precompile at `/Users/manuelmauro/Workspace/moonbeam/precompiles/xtokens/`

These precompiles provide XCM functionality to EVM smart contracts deployed on Moonbeam, completely independent of `pallet-revive`.

### 4. Moonbeam Doesn't Include pallet-revive in Runtime

Verification of runtime pallets confirms no usage:

```bash
# Check all three Moonbeam runtimes
$ grep -r "Revive\|pallet.revive" /Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/lib.rs
$ grep -r "Revive\|pallet.revive" /Users/manuelmauro/Workspace/moonbeam/runtime/moonriver/src/lib.rs
$ grep -r "Revive\|pallet.revive" /Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/lib.rs
# Result: No matches in any runtime
```

Moonbeam's `construct_runtime!` macro does not include `pallet-revive`.

## Evidence & References

**PR Documentation:**
- File: `/Users/manuelmauro/.substrate-mcp/moonbeam/releases/stable2506/pr-docs/pr_8584.prdoc`
- Audience: Runtime Dev
- Breaking change: Major version bumps for affected crates

**GitHub PR:**
- URL: https://github.com/paritytech/polkadot-sdk/pull/8584
- Status: Merged
- Purpose: Remove XCM dependencies from pallet-revive to avoid cyclic dependencies

**Codebase Search Results:**
```bash
# Confirmed no direct usage in Moonbeam source files
$ grep -r "pallet-revive\|pallet_revive" /Users/manuelmauro/Workspace/moonbeam \
  --include="*.toml" --include="*.rs" --exclude-dir=target
# Only matches:
# - Cargo.lock (transitive dependency)
# - .substrate-mcp/ analysis files
```

**TypeScript API References:**
The following files contain auto-generated types that reference revive-related types:
- `/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbase/interfaces/augment-types.ts`
- `/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonriver/interfaces/augment-types.ts`
- `/Users/manuelmauro/Workspace/moonbeam/typescript-api/src/moonbeam/interfaces/augment-types.ts`

These contain `ContractReviveProjectInfo` and `ContractReviveProjectSource` types, which are metadata types auto-generated from the Polkadot SDK. They will be updated when TypeScript APIs are regenerated but require no manual intervention.

## Conclusion

PR #8584 has **no impact** on Moonbeam because:

1. **Different execution environment**: pallet-revive targets PolkaVM, Moonbeam uses EVM via pallet-evm
2. **No dependency**: Moonbeam does not depend on or use pallet-revive in any capacity
3. **Independent XCM implementation**: Moonbeam has its own XCM integration through custom pallets and EVM precompiles
4. **Not in runtime**: pallet-revive is not included in any Moonbeam runtime (moonbase, moonriver, moonbeam)

**Action Required**: None. This PR is an internal refactoring of pallet-revive that does not affect Moonbeam's functionality or upgrade path.

**Upgrade Classification**: INHERITED - Changes will be automatically included when updating Polkadot SDK dependency, but no code changes or configuration updates are needed in Moonbeam.
