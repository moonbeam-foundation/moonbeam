# PR #8599: Snowbridge - Unpaid Execution When Bridging to Ethereum

**Status**: No Impact on Moonbeam
**Audience**: Runtime Dev
**Category**: Snowbridge (Polkadot/Kusama <-> Ethereum Bridge)

## Summary

This PR modifies how execution fees are handled in Snowbridge V2 when bridging messages to Ethereum. It eliminates the need for pre-configured bridge fees by dynamically estimating execution fees on Ethereum and injecting them directly into XCM messages. Additionally, it removes the requirement to maintain Asset Hub's sovereign account on Bridge Hub.

## Technical Changes

### Core Modification
The PR replaces `SovereignPaidRemoteExporter` with an enhanced `UnpaidRemoteExporter` that:
- Supports delivery fee attachments while avoiding pre-allocated destination execution costs
- Estimates Ethereum execution fees dynamically rather than using pre-calculated values
- Eliminates unnecessary fee complexity in the Snowbridge V2 architecture

### Key Points
- The term "unpaid" specifically refers to **destination chain execution costs**, not source chain delivery fees
- The exporter still properly charges for message delivery
- Relies on XCM's `UnpaidExecution` instruction for the destination chain
- Applied to both Snowbridge V1 and V2 routes

### Affected Crates
- `staging-xcm-builder` (patch bump)
- `snowbridge-runtime-common` (major bump)
- `bridge-hub-rococo-runtime` (major bump)
- `bridge-hub-westend-runtime` (major bump)
- `asset-hub-westend-runtime` (patch bump)

## Impact on Moonbeam: NONE

### Why This PR Doesn't Affect Moonbeam

1. **Different Bridge Architecture**
   - **Snowbridge**: Connects Polkadot/Kusama ecosystem to Ethereum mainnet
   - **Moonbeam**: Uses GRANDPA-based bridges to connect Moonbeam (Polkadot) <-> Moonriver (Kusama)

2. **No Snowbridge Dependencies**
   - Moonbeam does not use `snowbridge-runtime-common` or any Snowbridge components
   - Search confirmed zero references to `UnpaidRemoteExporter` or `SovereignPaidRemoteExporter` in the codebase

3. **Different Message Export Strategy**
   - **Moonbase**: `type MessageExporter = ();` (no exporter configured)
   - **Moonbeam**: `type MessageExporter = BridgeXcmOverMoonriver;` (GRANDPA bridge to Moonriver)
   - **Moonriver**: `type MessageExporter = BridgeXcmOverMoonbeam;` (GRANDPA bridge to Moonbeam)

4. **Distinct Use Cases**
   - Moonbeam IS an Ethereum-compatible runtime itself (via Frontier)
   - Moonbeam doesn't need to bridge TO Ethereum; it provides Ethereum compatibility natively
   - The Moonbeam<->Moonriver bridge uses `pallet_bridge_messages`, not Snowbridge

### Moonbeam's Bridge Infrastructure

Moonbeam's cross-chain messaging uses:
- `pallet_bridge_grandpa` - Tracks Kusama relay chain finality
- `pallet_bridge_parachains` - Tracks Moonriver parachain headers
- `pallet_bridge_messages` - Handles XCM message passing between Moonbeam and Moonriver
- **NOT** Snowbridge components

## Migration Required: NO

No code changes, configuration updates, or migrations are required for Moonbeam.

## Recommendations

- **Action**: None required
- **Monitoring**: No specific monitoring needed for this change
- **Testing**: No Moonbeam-specific testing required

## References

- **PR**: https://github.com/paritytech/polkadot-sdk/pull/8599
- **PRDoc**: `/Users/manuelmauro/.substrate-mcp/moonbeam/releases/stable2506/pr-docs/pr_8599.prdoc`
- **Moonbeam XCM Config**: `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbase/src/xcm_config.rs`
- **Moonbeam Bridge Config**: `/Users/manuelmauro/Workspace/moonbeam/runtime/moonbeam/src/bridge_config.rs`

## Conclusion

PR #8599 is specific to Snowbridge's implementation of Polkadot/Kusama to Ethereum bridging. Since Moonbeam:
1. Does not use Snowbridge
2. Uses GRANDPA-based bridges for Moonbeam<->Moonriver communication
3. Provides native Ethereum compatibility rather than bridging to Ethereum
4. Has no dependencies on the modified crates

This PR has **zero impact** on Moonbeam and requires no attention from the Moonbeam team.
