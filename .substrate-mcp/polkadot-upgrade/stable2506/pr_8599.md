# PR 8599: Snowbridge - Unpaid Execution When Bridging to Ethereum

## Overview
- **PR**: https://github.com/paritytech/polkadot-sdk/pull/8599
- **Audience**: Runtime Dev
- **Impact**: NO IMPACT on Moonbeam

## Summary
This PR changes how Snowbridge V2 handles execution fees when bridging to Ethereum. Instead of using `SovereignPaidRemoteExporter` with pre-estimated fees and maintaining the Asset Hub's sovereign account on Bridge Hub, it now uses `UnpaidRemoteExporter` with dynamically estimated fees injected into the XCM.

## Changes Made
1. **Fee Estimation**: Changed from pre-configured bridge fees to dynamic on-the-fly estimation
2. **Exporter Replacement**: Replaced `SovereignPaidRemoteExporter` with `UnpaidRemoteExporter`
3. **Account Management**: Eliminated the need to maintain Asset Hub's sovereign account on Bridge Hub
4. **Barrier Configuration**: Updated XCM barriers to permit `UnpaidExecution` instructions from appropriate origins

## Affected Crates
- `staging-xcm-builder` (patch)
- `snowbridge-runtime-common` (major)
- `bridge-hub-rococo-runtime` (major)
- `bridge-hub-westend-runtime` (major)
- `asset-hub-westend-runtime` (patch)

## Modified Areas
- XCM configuration files across multiple parachains (Asset Hub, Bridge Hub)
- `UnpaidRemoteExporter` in XCM builder
- Snowbridge V1 and V2 converter modules
- Runtime test files and barrier configurations

## Impact on Moonbeam

### Analysis
Moonbeam is **not** a bridge hub and does not use Snowbridge infrastructure. The search results show:

**XCM Builder Usage:**
- Found 31 files using `xcm_builder` in Moonbeam's runtime configurations
- These are for standard XCM functionality, not bridge-specific features

**Remote Exporter Usage:**
```bash
# Search for SovereignPaidRemoteExporter/UnpaidRemoteExporter
Results: Only found in test mock files
```

**Files with RemoteExporter references:**
- `/runtime/moonriver/tests/xcm_mock/statemine_like.rs` (mock only)
- `/runtime/moonbeam/tests/xcm_mock/statemint_like.rs` (mock only)
- `/runtime/moonbase/tests/xcm_mock/statemint_like.rs` (mock only)
- Various precompile mock files (test only)

**No production runtime usage** of remote exporters was found.

### Moonbeam's XCM Architecture
Moonbeam uses XCM for:
1. Cross-chain asset transfers via `pallet-xcm`
2. Remote transact capabilities via `pallet-xcm-transactor`
3. XCM precompiles for EVM contract interaction with XCM
4. Asset registration and management

None of these use Snowbridge or remote exporters for Ethereum bridging.

### UnpaidExecution Barrier Impact
The PR requires chains to update their XCM barriers to accept `UnpaidExecution` from specific origins. However, since Moonbeam:
- Is not a bridge hub
- Doesn't use Snowbridge
- Doesn't use remote exporters

The barrier changes are not applicable.

### Conclusion
**NO ACTION REQUIRED**

This is specific to Snowbridge V2 infrastructure on Bridge Hubs. Moonbeam's XCM configuration is unaffected.

## Migration Required
None - Moonbeam doesn't use Snowbridge or the affected XCM components.

## Testing Recommendations
None required. Standard XCM functionality testing during upgrade is sufficient.

## Notes
If Moonbeam ever integrates Snowbridge in the future, this PR's changes would need to be considered at that time. Currently, Ethereum bridging is handled through other mechanisms outside of Snowbridge.
