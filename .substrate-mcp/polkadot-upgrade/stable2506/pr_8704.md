# PR #8704: Report EPMB Pallet Weights for Kusama and Polkadot

## Overview

**PR Title**: [AHM] Repot the weights of epmb pallet to expose kusama and polkadot weights

**GitHub**: https://github.com/paritytech/polkadot-sdk/pull/8704

**Status**: Merged (June 2, 2025)

**Affected Crates**:
- `pallet-election-provider-multi-block` (major bump)
- `pallet-staking-async-parachain-runtime` (major bump)

## Summary

This PR updates weight benchmarks for the `pallet-election-provider-multi-block` (EPMB) pallet, providing separate weight measurements for Polkadot and Kusama network configurations. The weights are reported across different operation types: signed operations, unsigned operations, and verifier operations.

## Technical Details

### Changes Made

1. **Weight Reporting**: Reports benchmarked weights for EPMB pallet operations on both Kusama (ksm_size) and Polkadot (dot_size) configurations
2. **Custom Template**: Uses a custom Handlebars template for weight generation that excludes the standard `WeightInfo` trait
3. **Multiple Weight Modules**: Separate weight files for:
   - Signed operations
   - Unsigned operations
   - Verifier operations

### Context

- Part of the Async Staking Initiative (AHM - Async Hope Milestone)
- The pallet cannot be benchmarked in CI due to large genesis configuration requirements
- Benchmarks were run on reference hardware manually
- All measured values showed "Unchanged" status, confirming consistency with previous measurements

### Breaking Changes

This PR is marked with a **major version bump** for both affected crates, indicating potential breaking changes to the public interface.

## Impact Assessment for Moonbeam

### Direct Impact: NONE

**Moonbeam does not use the affected pallets.**

After analyzing the Moonbeam codebase:

1. **No EPMB Usage**: Moonbeam does not include `pallet-election-provider-multi-block` in any of its runtime configurations (moonbeam, moonriver, moonbase)

2. **No Async Staking**: Moonbeam does not use `pallet-staking-async-parachain-runtime`

3. **Custom Staking Implementation**: Moonbeam uses its own staking mechanism through `pallet-parachain-staking`, which is a custom implementation designed for parachain collator selection

### Why This Doesn't Apply

The Election Provider Multi-Block (EPMB) pallet is part of the Polkadot/Kusama relay chain staking infrastructure, specifically designed for the complex validator election process on the relay chain. Parachains like Moonbeam:

1. **Don't Validate Relay Chain**: Parachains don't participate in relay chain validation, so they don't need relay chain election mechanisms
2. **Custom Collator Selection**: Moonbeam has its own collator selection mechanism through `pallet-parachain-staking`
3. **Different Architecture**: Parachain staking has different requirements than relay chain validator elections

## Recommendations

### Action Required: NONE

This PR can be safely ignored for Moonbeam upgrade planning.

### Rationale

1. No dependency relationship exists between Moonbeam and the affected pallets
2. No configuration changes needed
3. No migration required
4. No API surface area affected

### Future Considerations

If Moonbeam ever considers:
- Implementing an election-based collator selection mechanism
- Contributing to relay chain governance that uses election providers
- Adopting async staking patterns

Then this PR's changes would become relevant. However, this is not on the current roadmap.

## Related PRs

This PR is part of a larger initiative around async staking. Related PRs in this upgrade that may reference EPMB:
- PR #7597: Async backing features
- PR #8127: Async staking infrastructure
- PR #8310, #8316: Additional async staking components
- PR #8337, #8339, #8422, #8633: Further async staking work
- PR #8702: Additional async staking updates

None of these directly impact Moonbeam's current architecture.

## Conclusion

**Impact Level**: NONE

**Action Required**: None

**Risk**: None

This PR is specific to relay chain staking infrastructure and does not affect parachains like Moonbeam that use custom staking implementations. The changes can be safely ignored during the stable2506 upgrade process.
