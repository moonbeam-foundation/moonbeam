# PR #8725: Snowbridge - Register Polkadot Native Asset with Fee

## Overview

**PR Title**: Snowbridge: enforce fee when registering Polkadot native asset
**PR Number**: #8725
**GitHub URL**: https://github.com/paritytech/polkadot-sdk/pull/8725
**Status**: Merged (June 9, 2025)
**Author**: Adrian Catangiu
**Audience**: Runtime Dev

## Summary

This PR enforces fee requirements when registering Polkadot Native Assets (PNA) through the Snowbridge bridge system. Previously, asset registration could be performed without fees, which this change addresses by implementing proper fee validation, asset swapping, and burning mechanisms.

## Changes

### Affected Crates

- `snowbridge-pallet-system-frontend` - patch bump
- `snowbridge-pallet-system-v2` - patch bump
- `asset-hub-westend-runtime` - patch bump
- `bridge-hub-westend-integration-tests` - no bump

### Technical Implementation

**Core Functionality:**

1. **Fee Enforcement**: Modified the PNA registration process to require and validate fee payments for all non-root origin calls
2. **Asset Swapping**: Implemented `swap_fee_asset_and_burn` function to handle fee asset conversion and burning
3. **Root Origin Handling**: Added special logic to bypass fee requirements for root origin transactions
4. **Zero-Fee Support**: Allows configuration of zero fees as a valid option

**Code Refactoring:**

- Extracted common functions like `swap_fee_asset_and_burn` and `send_transact_call` for reusability
- Updated benchmarks to reflect the new fee-based workflow
- Extended test coverage for fee enforcement scenarios

## Impact Assessment for Moonbeam

### Direct Impact: **LOW**

**Reasoning:**

1. **Snowbridge Scope**: This PR specifically affects the Snowbridge bridge (Polkadot<>Ethereum bridge) components, particularly the Asset Hub runtime
2. **Moonbeam Architecture**: Moonbeam operates as an Ethereum-compatible parachain and does not directly integrate Snowbridge pallets
3. **Component Isolation**: Changes are contained within Snowbridge-specific pallets (`snowbridge-pallet-system-frontend`, `snowbridge-pallet-system-v2`)

### Indirect Considerations

**Potential Future Relevance:**

- If Moonbeam plans to integrate with Snowbridge for Polkadot<>Ethereum bridging functionality
- If cross-chain asset registration patterns from Snowbridge become standardized across parachains
- Economic model considerations for any asset registration features in Moonbeam

### No Migration Required

This PR does not require any migration for Moonbeam because:
- No changes to core Substrate pallets used by Moonbeam
- No changes to XCM, EVM, or staking functionality
- Snowbridge pallets are not part of Moonbeam's runtime

## Testing Coverage

- 395+ automated checks passed
- Extended test coverage for fee enforcement scenarios
- Benchmark updates reflect new fee-based workflows
- Integration tests in `bridge-hub-westend-integration-tests`

## Recommendations for Moonbeam

1. **No Action Required**: This PR does not necessitate any immediate changes to Moonbeam codebase
2. **Monitoring**: Track Snowbridge developments if future integration is planned
3. **Pattern Observation**: The fee enforcement pattern could inform design decisions for any future asset registration features in Moonbeam

## Related Issues

- SNO-1497: Original issue tracking the need for fee enforcement

## Release Information

- Merged to master branch
- Backported to stable2503 release branch
- Part of stable2506 release tracking
- Label: T15-bridges

## Additional Context

### What is Snowbridge?

Snowbridge is the native Polkadot<>Ethereum bridge that enables trustless cross-chain communication and asset transfers. It operates through:
- Asset Hub (for asset management)
- Bridge Hub (for message passing)
- Ethereum contracts (for Ethereum-side validation)

### What are Polkadot Native Assets (PNA)?

Polkadot Native Assets are tokens that originate on Polkadot/Kusama parachains and can be bridged to Ethereum through Snowbridge. The registration process allows these assets to be represented on Ethereum.

### Why Enforce Fees?

Fee enforcement serves multiple purposes:
1. **Economic Security**: Prevents spam registrations
2. **Resource Management**: Ensures proper compensation for computational resources
3. **Governance Alignment**: Creates economic barriers for low-quality asset registrations

## Conclusion

This PR represents a targeted improvement to Snowbridge's economic model with minimal impact on parachains that don't integrate Snowbridge components. For Moonbeam, no action is required as part of the stable2506 upgrade related to this specific change.

**Classification**: Informational - No Action Required
