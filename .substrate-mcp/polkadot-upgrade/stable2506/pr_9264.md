# PR #9264: gossip-support: make low connectivity message an error

## Summary

**PR Title:** gossip-support: make low connectivity message an error
**Audience:** Node Dev
**Crates:** polkadot-gossip-support (patch bump)
**Status:** Merged and backported to stable2503, stable2506

## Description

This PR changes the log level of validator connectivity warnings from debug/warning to error level to make network connectivity issues more visible to node operators. It also reduces the connectivity threshold to 85% to avoid triggering errors too aggressively.

## Technical Details

### Changes Made
- Elevated low connectivity log messages from debug/warn to error level
- Reduced connectivity threshold from previous level to 85%
- Only logs error when node is currently an authority (validator)
- Added session index to logging context

### Problem Being Solved
Poor validator connectivity causes cascading issues:
1. **Delayed Finality**: Validators cannot retrieve PoVs (Proofs of Validity) to validate approval work
2. **Block Backing Failures**: Gossiping of backing statements uses grid topology, and low peer counts cause validators to miss backing statements
3. **Low Visibility**: Issues only visible in `polkadot_parachain_peer_count` metrics, which operators often don't monitor closely

### Affected Component
- `polkadot/node/network/gossip-support/src/lib.rs`

## Impact on Moonbeam

### Assessment: NO IMPACT

**Reason:** This change affects the relay chain validator gossip-support subsystem, which is **not used by Moonbeam**.

### Why Moonbeam is Unaffected

1. **Architecture Difference**:
   - Moonbeam runs as a **parachain collator**, not a relay chain validator
   - The gossip-support subsystem is specific to relay chain validator operations

2. **Component Usage**:
   - Moonbeam uses cumulus-based parachain components (`cumulus_client_collator`, `cumulus_client_service`)
   - The polkadot-gossip-support crate appears in Cargo.lock as a transitive dependency but is not actively used by Moonbeam's node implementation

3. **Network Topology**:
   - Moonbeam collators connect to relay chain validators for parachain consensus
   - They do not participate in relay chain validator gossip networks
   - The grid topology and validator-to-validator connectivity concerns do not apply to collators

## Action Required

### For Moonbeam Team
- ✅ **No action required**
- ✅ No code changes needed
- ✅ No configuration changes needed
- ✅ No testing required

### For Documentation
- No documentation updates needed (not applicable to parachain nodes)

## References

- **PRDoc:** `/Users/manuelmauro/.substrate-mcp/moonbeam/releases/stable2506/pr-docs/pr_9264.prdoc`
- **GitHub PR:** https://github.com/paritytech/polkadot-sdk/pull/9264
- **Related Issues:**
  - https://github.com/paritytech/polkadot-sdk/issues/8915 (Finality delays due to low connectivity)

## Verification

To confirm Moonbeam doesn't use gossip-support:
```bash
# Search for direct usage (none found)
rg "gossip.support|GossipSupport" /Users/manuelmauro/Workspace/moonbeam/node/

# Node service uses cumulus parachain components, not validator subsystems
# See: /Users/manuelmauro/Workspace/moonbeam/node/service/src/lib.rs
```

## Conclusion

This is an operational improvement for relay chain validators to detect connectivity issues earlier. Since Moonbeam operates as a parachain collator and does not run relay chain validator functionality, this change has no impact on Moonbeam's operations, performance, or monitoring.

**Classification:** Informational only - No action required
