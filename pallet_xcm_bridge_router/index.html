<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A pallet that can be used as an alternative in the XCM router configuration — see the `SendXcm` implementation for details."><title>pallet_xcm_bridge_router - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-c5d6553a23f1e5a6.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_xcm_bridge_router" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0 (eeb90cda1 2024-09-04)" data-channel="1.81.0" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../pallet_xcm_bridge_router/index.html">pallet_xcm_bridge_router</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">pallet_xcm_bridge_router</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/pallet_xcm_bridge_router/lib.rs.html#17-449">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A pallet that can be used as an alternative in the XCM router configuration — see the <code>SendXcm</code>
implementation for details.</p>
<h3 id="features"><a class="doc-anchor" href="#features">§</a>Features</h3>
<p>This pallet offers several optional features to customize functionality:</p>
<h4 id="message-size-fee"><a class="doc-anchor" href="#message-size-fee">§</a>Message Size Fee</h4>
<p>An optional fee based on <code>T::FeeAsset</code> and <code>T::ByteFee</code>. If <code>T::FeeAsset</code> is not specified, this
fee is not calculated.</p>
<h4 id="dynamic-fees-and-congestion"><a class="doc-anchor" href="#dynamic-fees-and-congestion">§</a>Dynamic Fees and Congestion</h4>
<p>This pallet supports storing the congestion status of bridge outbound queues. The fee increases
exponentially if the queue between this chain and a sibling or child bridge hub becomes
congested. All other bridge hub queues provide backpressure mechanisms, so if any of these
queues are congested, it will eventually lead to increased queuing on this chain.</p>
<p>There are two methods for storing congestion status:</p>
<ol>
<li>A dedicated extrinsic <code>update_bridge_status</code>, which relies on <code>T::UpdateBridgeStatusOrigin</code>.
This allows the message exporter to send, for example, an XCM <code>Transact</code>.</li>
<li>An implementation of <code>bp_xcm_bridge::LocalXcmChannelManager</code>.</li>
</ol>
<h3 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h3>
<p>This pallet provides several implementations, such as <code>ViaLocalBridgeExporter</code> and
<code>ViaRemoteBridgeExporter</code>, which can expose or access these features.</p>
<p>This router can be used in two main scenarios, depending on where the router and message
exporter (e.g., <code>pallet_xcm_bridge_hub</code> or another pallet with an <code>ExportXcm</code> implementation)
are deployed:</p>
<h4 id="on-the-same-chain-as-the-message-exporter"><a class="doc-anchor" href="#on-the-same-chain-as-the-message-exporter">§</a>On the Same Chain as the Message Exporter</h4>
<p>In this setup, the router directly calls an <code>ExportXcm</code> implementation. In this case,
<code>ViaLocalBridgeExporter</code> can be used as a wrapper with <code>T::MessageExporter</code>.</p>
<h4 id="on-a-different-chain-than-the-message-exporter"><a class="doc-anchor" href="#on-a-different-chain-than-the-message-exporter">§</a>On a Different Chain than the Message Exporter</h4>
<p>In this setup, we need to provide a <code>SendXcm</code> implementation for <code>T::MessageExporter</code>, which
sends <code>ExportMessage</code>. For example, <code>SovereignPaidRemoteExporter</code> can be used with
<code>ViaRemoteBridgeExporter</code>.</p>
<p><strong>Note on Terminology</strong>: When we refer to the bridge hub, we mean the chain that has the
<code>pallet-bridge-messages</code> with an <code>ExportXcm</code> implementation deployed, such as
<code>pallet-xcm-bridge</code>. Depending on the deployment setup, <code>T::MessageExporter</code> can be
configured accordingly — see <code>T::MessageExporter</code> for additional documentation.</p>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.WeightInfo"><code>pub use weights::<a class="trait" href="weights/trait.WeightInfo.html" title="trait pallet_xcm_bridge_router::weights::WeightInfo">WeightInfo</a>;</code></div></li><li><div class="item-name"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_xcm_bridge_router::pallet">pallet</a>::*;</code></div></li></ul><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="impls/index.html" title="mod pallet_xcm_bridge_router::impls">impls</a></div><div class="desc docblock-short">Various implementations supporting easier configuration of the pallet.</div></li><li><div class="item-name"><a class="mod" href="pallet/index.html" title="mod pallet_xcm_bridge_router::pallet">pallet</a></div><div class="desc docblock-short">The <code>pallet</code> module in each FRAME pallet hosts the most important items needed
to construct this pallet.</div></li><li><div class="item-name"><a class="mod" href="weights/index.html" title="mod pallet_xcm_bridge_router::weights">weights</a></div><div class="desc docblock-short">Autogenerated weights for pallet_xcm_bridge_hub_router</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.BridgeState.html" title="struct pallet_xcm_bridge_router::BridgeState">BridgeState</a></div><div class="desc docblock-short">Current status of the bridge.</div></li></ul><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.HARD_MESSAGE_SIZE_LIMIT.html" title="constant pallet_xcm_bridge_router::HARD_MESSAGE_SIZE_LIMIT">HARD_MESSAGE_SIZE_LIMIT</a></div><div class="desc docblock-short">Maximal size of the XCM message that may be sent over bridge.</div></li><li><div class="item-name"><a class="constant" href="constant.LOG_TARGET.html" title="constant pallet_xcm_bridge_router::LOG_TARGET">LOG_TARGET</a></div><div class="desc docblock-short">The target that will be used when publishing logs related to this pallet.</div></li><li><div class="item-name"><a class="constant" href="constant.MINIMAL_DELIVERY_FEE_FACTOR.html" title="constant pallet_xcm_bridge_router::MINIMAL_DELIVERY_FEE_FACTOR">MINIMAL_DELIVERY_FEE_FACTOR</a></div><div class="desc docblock-short">Minimal delivery fee factor.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.ResolveBridgeId.html" title="trait pallet_xcm_bridge_router::ResolveBridgeId">ResolveBridgeId</a></div><div class="desc docblock-short">Trait that resolves a specific <code>BridgeId</code> for <code>dest</code>.</div></li></ul></section></div></main></body></html>